---
description: comprehensive workflow for level 4 complex system tasks
globs: "**/level4/**", "**/workflow/**"
alwaysapply: false
---
# comprehensive workflow for level 4 tasks

> **tldr:** this document outlines a comprehensive workflow for level 4 (complex system) tasks, including 7 key phases with rigorous planning, mandatory creative phases, architectural design, phased implementation, and extensive documentation.

## 🔍 level 4 workflow overview

```mermaid
graph lr
    init["1. initialization"] --> doc["2. documentation<br>setup"]
    doc --> plan["3. architectural<br>planning"]
    plan --> create["4. creative<br>phases"]
    create --> impl["5. phased<br>implementation"]
    impl --> reflect["6. reflection"]
    reflect --> archive["7. archiving"]
    
    %% document connections for each phase
    init -.-> initdocs["initialization"]
    doc -.-> docdocs["documentation"]
    plan -.-> plandocs["architectural planning"]
    create -.-> createdocs["creative phases"]
    impl -.-> impldocs["phased implementation"]
    reflect -.-> reflectdocs["reflection"]
    archive -.-> archivedocs["archiving"]
```

## 🔄 level transition handling

```mermaid
graph td
    l4["level 4 task"] --> assess["continuous<br>assessment"]
    
    assess --> down["downgrade to<br>level 2/3"]
    assess --> split["split into<br>multiple tasks"]
    
    down --> l23trigger["triggers:<br>- less complex<br>- limited scope<br>- few components"]
    
    split --> multitrigger["triggers:<br>- too large<br>- independent parts<br>- parallel possible"]
    
    l23trigger --> l23switch["switch to<br>level 2/3 workflow"]
    multitrigger --> createtasks["create multiple<br>lower level tasks"]
```

level 4 tasks involve complex systems that require comprehensive planning, rigorous design, systematic implementation, and thorough documentation. this workflow ensures all aspects are addressed with the appropriate level of detail, structure, and verification.

## 📋 workflow phases

### phase 1: initialization

```mermaid
graph td
    start["start level 4 task"] --> platform{"detect<br>platform"}
    platform --> filecheck["critical file<br>verification"]
    filecheck --> loadstructure["comprehensive memory<br>bank structure loading"]
    loadstructure --> taskcreation["create detailed<br>task framework"]
    taskcreation --> context["establish enterprise<br>context"]
    context --> resources["identify and allocate<br>all resources"]
    resources --> setupcomplete["initialization<br>complete"]
```

**steps:**
1. platform detection with comprehensive environment configuration
2. critical file verification with in-depth integrity checks
3. comprehensive memory bank structure loading with full reference mapping
4. create detailed task framework in tasks.md with full structure
5. establish complete enterprise context and stakeholder requirements
6. identify and allocate all necessary resources (technical, human, time)
7. perform system readiness assessment

**milestone checkpoint:**
```
✓ initialization checkpoint
- platform detected and fully configured? [yes/no]
- critical files verified with integrity checks? [yes/no]
- memory bank comprehensively loaded and mapped? [yes/no]
- detailed task framework created? [yes/no]
- enterprise context established? [yes/no]
- stakeholder requirements documented? [yes/no]
- all resources identified and allocated? [yes/no]
- system readiness assessed? [yes/no]

→ if all yes: proceed to documentation setup
→ if any no: complete initialization steps
```

### phase 2: documentation setup

```mermaid
graph td
    start["begin documentation<br>setup"] --> loadtemplate["load comprehensive<br>documentation templates"]
    loadtemplate --> framework["establish documentation<br>framework"]
    framework --> updateproject["update<br>projectbrief.md"]
    updateproject --> updatecontext["update<br>activecontext.md"]
    updatecontext --> systempatterns["update<br>systempatterns.md"]
    systempatterns --> techcontext["update<br>techcontext.md"]
    techcontext --> standards["document system<br>standards"]
    standards --> architecture["document existing<br>architecture"]
    architecture --> setupcomplete["documentation<br>setup complete"]
```

**steps:**
1. load comprehensive documentation templates for all aspects
2. establish complete documentation framework with structure
3. update projectbrief.md with detailed system description and requirements
4. update activecontext.md with current focus, dependencies, and stakeholders
5. update systempatterns.md with comprehensive patterns and principles
6. update techcontext.md with complete technical landscape
7. document system standards, constraints, and conventions
8. document existing architecture and integration points

**milestone checkpoint:**
```
✓ documentation checkpoint
- documentation templates loaded? [yes/no]
- documentation framework established? [yes/no]
- projectbrief.md comprehensively updated? [yes/no]
- activecontext.md fully updated? [yes/no]
- systempatterns.md comprehensively updated? [yes/no]
- techcontext.md fully updated? [yes/no]
- system standards documented? [yes/no]
- existing architecture documented? [yes/no]

→ if all yes: proceed to architectural planning
→ if any no: complete documentation setup
```

### phase 3: architectural planning

```mermaid
graph td
    start["begin architectural<br>planning"] --> requirements["analyze comprehensive<br>requirements"]
    requirements --> businesscontext["document business<br>context"]
    businesscontext --> visiondefine["define vision<br>and goals"]
    visiondefine --> architecturalprinciples["establish architectural<br>principles"]
    architecturalprinciples --> alternatives["explore architectural<br>alternatives"]
    alternatives --> evaluation["perform detailed<br>evaluation"]
    evaluation --> selection["make architecture<br>selection"]
    selection --> documentation["create architecture<br>documentation"]
    documentation --> review["conduct architecture<br>review"]
    review --> plancomplete["architectural planning<br>complete"]
```

**steps:**
1. analyze comprehensive requirements with traceability
2. document complete business context and constraints
3. define clear vision and goals with measurable objectives
4. establish architectural principles and non-functional requirements
5. explore multiple architectural alternatives with thorough analysis
6. perform detailed evaluation using weighted criteria
7. make architecture selection with comprehensive justification
8. create complete architecture documentation with diagrams
9. conduct formal architecture review with stakeholders

**milestone checkpoint:**
```
✓ architectural planning checkpoint
- requirements comprehensively analyzed? [yes/no]
- business context fully documented? [yes/no]
- vision and goals clearly defined? [yes/no]
- architectural principles established? [yes/no]
- alternatives thoroughly explored? [yes/no]
- detailed evaluation performed? [yes/no]
- architecture selection justified? [yes/no]
- architecture documentation complete? [yes/no]
- architecture review conducted? [yes/no]

→ if all yes: proceed to creative phases
→ if any no: complete architectural planning
```

### phase 4: creative phases

```mermaid
graph td
    start["begin creative<br>phases"] --> identifyneeds["identify creative<br>phase needs"]
    identifyneeds --> architecture["architecture<br>design phase"]
    architecture --> algorithm["algorithm<br>design phase"]
    algorithm --> uiux["ui/ux<br>design phase"]
    uiux --> integration["integration<br>design phase"]
    integration --> security["security<br>design phase"]
    security --> performance["performance<br>design phase"]
    performance --> resilience["resilience<br>design phase"]
    resilience --> documentation["comprehensive<br>design documentation"]
    documentation --> review["design<br>review"]
    review --> creativecomplete["creative phases<br>complete"]
```

**steps:**
1. identify all required creative phases based on system needs
2. execute comprehensive architecture design with patterns and principles
3. conduct thorough algorithm design for all complex processes
4. perform detailed ui/ux design with user research and testing
5. create integration design for all system interfaces
6. develop security design with threat modeling
7. design for performance with capacity planning
8. plan for resilience with failure modes and recovery
9. create comprehensive design documentation for all aspects
10. conduct formal design review with stakeholders

**milestone checkpoint:**
```
✓ creative phases checkpoint
- all required creative phases identified? [yes/no]
- architecture design completed with patterns? [yes/no]
- algorithm design conducted for complex processes? [yes/no]
- ui/ux design performed with user research? [yes/no]
- integration design created for interfaces? [yes/no]
- security design developed with threat modeling? [yes/no]
- performance design completed with capacity planning? [yes/no]
- resilience design planned with failure modes? [yes/no]
- comprehensive design documentation created? [yes/no]
- formal design review conducted? [yes/no]

→ if all yes: proceed to phased implementation
→ if any no: complete creative phases
```

### phase 5: phased implementation

```mermaid
graph td
    start["begin phased<br>implementation"] --> prepenv["prepare comprehensive<br>implementation environment"]
    prepenv --> framework["establish implementation<br>framework"]
    framework --> roadmapdefine["define implementation<br>roadmap"]
    roadmapdefine --> phaseimplementation["implement<br>sequential phases"]
    phaseimplementation --> phaseverification["verify each<br>phase"]
    phaseverification --> integration["perform integration<br>testing"]
    integration --> systemtest["conduct system<br>testing"]
    systemtest --> uat["user acceptance<br>testing"]
    uat --> stabilization["system<br>stabilization"]
    stabilization --> implcomplete["implementation<br>complete"]
```

**steps:**
1. prepare comprehensive implementation environment with all tools
2. establish implementation framework with standards and processes
3. define detailed implementation roadmap with phases and dependencies
4. implement sequential phases with milestone verification
5. verify each phase against requirements and design
6. perform comprehensive integration testing across phases
7. conduct thorough system testing of the complete solution
8. execute formal user acceptance testing with stakeholders
9. perform system stabilization and performance tuning
10. document all implementation details and deployment procedures

**milestone checkpoint:**
```
✓ phased implementation checkpoint
- implementation environment fully prepared? [yes/no]
- implementation framework established? [yes/no]
- detailed roadmap defined with phases? [yes/no]
- all phases sequentially implemented? [yes/no]
- each phase verified against requirements? [yes/no]
- comprehensive integration testing performed? [yes/no]
- thorough system testing conducted? [yes/no]
- user acceptance testing executed? [yes/no]
- system stabilization completed? [yes/no]
- implementation details documented? [yes/no]

→ if all yes: proceed to reflection
→ if any no: complete implementation steps
```

### phase 6: reflection

```mermaid
graph td
    start["begin<br>reflection"] --> template["load comprehensive<br>reflection template"]
    template --> systemreview["complete system<br>review"]
    systemreview --> process["analyze process<br>effectiveness"]
    process --> success["document successes<br>with evidence"]
    success --> challenges["document challenges<br>with solutions"]
    challenges --> technicalinsights["extract strategic<br>technical insights"]
    technicalinsights --> processinsights["extract process<br>improvement insights"]
    processinsights --> businessinsights["document business<br>impact"]
    businessinsights --> strategicactions["define strategic<br>action items"]
    strategicactions --> reflectcomplete["reflection<br>complete"]
```

**steps:**
1. load comprehensive reflection template with all sections
2. conduct complete system review against original goals
3. analyze process effectiveness with metrics
4. document successes with concrete evidence and impact
5. document challenges with implemented solutions and lessons
6. extract strategic technical insights for enterprise knowledge
7. extract process improvement insights for future projects
8. document business impact and value delivered
9. define strategic action items with prioritization
10. create comprehensive reflection documentation

**milestone checkpoint:**
```
✓ reflection checkpoint
- comprehensive reflection template loaded? [yes/no]
- complete system review conducted? [yes/no]
- process effectiveness analyzed? [yes/no]
- successes documented with evidence? [yes/no]
- challenges documented with solutions? [yes/no]
- strategic technical insights extracted? [yes/no]
- process improvement insights extracted? [yes/no]
- business impact documented? [yes/no]
- strategic action items defined? [yes/no]
- comprehensive reflection documentation created? [yes/no]

→ if all yes: proceed to archiving
→ if any no: complete reflection steps
```

### phase 7: archiving

```mermaid
graph td
    start["begin<br>archiving"] --> template["load comprehensive<br>archive template"]
    template --> systemdoc["create system<br>documentation"]
    systemdoc --> architecture["document final<br>architecture"]
    architecture --> design["compile design<br>decisions"]
    design --> implementation["document implementation<br>details"]
    implementation --> testing["compile testing<br>documentation"]
    testing --> deployment["create deployment<br>documentation"]
    deployment --> maintenance["prepare maintenance<br>guide"]
    maintenance --> knowledge["transfer knowledge<br>to stakeholders"]
    knowledge --> archive["create comprehensive<br>archive package"]
    archive --> archivecomplete["archiving<br>complete"]
```

**steps:**
1. load comprehensive archive template with all sections
2. create complete system documentation with all aspects
3. document final architecture with diagrams and rationales
4. compile all design decisions with justifications
5. document all implementation details with technical specifics
6. compile comprehensive testing documentation with results
7. create detailed deployment documentation with procedures
8. prepare maintenance guide with operational procedures
9. transfer knowledge to all stakeholders with training
10. create comprehensive archive package with all artifacts

**milestone checkpoint:**
```
✓ archiving checkpoint
- comprehensive archive template loaded? [yes/no]
- complete system documentation created? [yes/no]
- final architecture documented? [yes/no]
- design decisions compiled? [yes/no]
- implementation details documented? [yes/no]
- testing documentation compiled? [yes/no]
- deployment documentation created? [yes/no]
- maintenance guide prepared? [yes/no]
- knowledge transferred to stakeholders? [yes/no]
- comprehensive archive package created? [yes/no]

→ if all yes: task complete
→ if any no: complete archiving steps
```

## 📋 workflow verification checklist

```
✓ final workflow verification
- all 7 phases completed? [yes/no]
- all milestone checkpoints passed? [yes/no]
- architectural planning properly executed? [yes/no]
- all required creative phases completed? [yes/no]
- implementation performed in proper phases? [yes/no]
- comprehensive reflection conducted? [yes/no]
- complete system documentation archived? [yes/no]
- memory bank fully updated? [yes/no]
- knowledge successfully transferred? [yes/no]

→ if all yes: level 4 task successfully completed
→ if any no: address outstanding items
```

## 📋 minimal mode workflow

for minimal mode, use this streamlined workflow while retaining key elements:

```
1. init: verify environment, create structured task framework, establish context
2. docs: update all memory bank documents, document standards and architecture
3. plan: define architecture with principles, alternatives, evaluation, selection
4. create: execute all required creative phases with documentation
5. impl: implement in phases with verification, integration, testing
6. reflect: document successes, challenges, insights, and strategic actions
7. archive: create comprehensive documentation and knowledge transfer
```

## 🔄 integration with memory bank

this workflow integrates comprehensively with memory bank:

```mermaid
graph td
    workflow["level 4<br>workflow"] --> pb["comprehensive update<br>projectbrief.md"]
    workflow --> ac["detailed update<br>activecontext.md"]
    workflow --> sp["strategic update<br>systempatterns.md"]
    workflow --> tc["complete update<br>techcontext.md"]
    workflow --> tm["structured maintenance<br>tasks.md"]
    workflow --> pm["enterprise update<br>progress.md"]
    
    pb & ac & sp & tc & tm & pm --> mb["memory bank<br>integration"]
    mb --> kt["knowledge<br>transfer"]
    kt --> nextsystem["enterprise<br>system evolution"]
```

## 🚨 level 4 governance principle

remember:

```
┌─────────────────────────────────────────��───────────┐
│ level 4 tasks represent enterprise-critical work.   │
│ rigorous governance, comprehensive documentation,   │
│ and thorough verification are mandatory at each     │
│ phase. no exceptions.                               │
└─────────────────────────────────────────────────────┘
```

this ensures that complex systems are designed, implemented, and documented to the highest standards, with enterprise-grade quality and governance.