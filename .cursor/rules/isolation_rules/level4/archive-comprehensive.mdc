---
description: comprehensive archiving approach for level 4 complex system tasks
globs: "**/level4/**", "**/archive/**"
alwaysapply: false
---

# comprehensive archiving for level 4 tasks

> **tldr:** this document outlines a comprehensive archiving approach for level 4 (complex system) tasks, ensuring all system knowledge, decisions, implementation details, and lessons learned are preserved for future reference and reuse.

## üîç comprehensive archiving overview

level 4 complex system tasks require thorough archiving to preserve system knowledge, design decisions, implementation details, and lessons learned. this systematic archiving process ensures that the organization maintains institutional knowledge and enables future teams to understand, maintain, and extend the system.

```mermaid
flowchart td
    classdef phase fill:#f9d77e,stroke:#d9b95c,color:#000
    classdef artifact fill:#f4b8c4,stroke:#d498a4,color:#000
    classdef verification fill:#c5e8b7,stroke:#a5c897,color:#000
    
    start([begin archiving<br>process]) --> template[load comprehensive<br>archive template]
    template --> refdoc[review reflection<br>document]
    refdoc --> sysdoc[create system<br>documentation]
    sysdoc --> archdoc[document architecture<br>and design]
    archdoc --> impldoc[document implementation<br>details]
    impldoc --> apidoc[create api<br>documentation]
    apidoc --> datadoc[document data<br>models and schemas]
    datadoc --> secdoc[document security<br>measures]
    secdoc --> testdoc[document testing<br>procedures and results]
    testdoc --> deploydoc[document deployment<br>procedures]
    deploydoc --> opdoc[create operational<br>documentation]
    opdoc --> knowledgedoc[create knowledge<br>transfer documentation]
    knowledgedoc --> crossref[create cross-reference<br>documentation]
    crossref --> archive[archive all<br>project materials]
    archive --> updatemb[update memory<br>bank]
    updatemb --> verification{archiving<br>verification}
    verification -->|pass| complete([archiving<br>complete])
    verification -->|fail| revise[revise<br>archiving]
    revise --> verification
    
    template -.-> at((archive<br>template))
    sysdoc -.-> sd((system<br>documentation))
    archdoc -.-> ad((architecture<br>documentation))
    impldoc -.-> id((implementation<br>documentation))
    apidoc & datadoc -.-> intdoc((interface<br>documentation))
    testdoc & deploydoc & opdoc -.-> opdocs((operational<br>documentation))
    
    class start,complete milestone
    class template,refdoc,sysdoc,archdoc,impldoc,apidoc,datadoc,secdoc,testdoc,deploydoc,opdoc,knowledgedoc,crossref,archive,updatemb step
    class verification verification
    class at,sd,ad,id,intdoc,opdocs artifact
```

## üìã archive template structure

### 1. system overview

```markdown
## system overview

### system purpose and scope
[comprehensive description of the system purpose, scope, and business context]

### system architecture
[summary of the architecture, including diagrams, patterns, and key design decisions]

### key components
- component 1: [description and purpose]
- component 2: [description and purpose]
- component 3: [description and purpose]

### integration points
[description of all internal and external integration points]

### technology stack
[comprehensive list of all technologies, frameworks, and tools used]

### deployment environment
[description of the deployment environment, infrastructure, and configuration]
```

### 2. requirements and design documentation

```markdown
## requirements and design documentation

### business requirements
[comprehensive list of business requirements with traceability]

### functional requirements
[detailed functional requirements with implementation mapping]

### non-functional requirements
[non-functional requirements with implementation approaches]

### architecture decision records
[collection of all architecture decision records (adrs)]

### design patterns used
[catalog of all design patterns with usage examples]

### design constraints
[documentation of all design constraints and their impact]

### design alternatives considered
[summary of alternatives considered and reasons for final selections]
```

### 3. implementation documentation

```markdown
## implementation documentation

### component implementation details
- **component 1**:
  - **purpose**: [component purpose]
  - **implementation approach**: [implementation details]
  - **key classes/modules**: [list with descriptions]
  - **dependencies**: [internal and external dependencies]
  - **special considerations**: [important notes]

- **component 2**:
  - **purpose**: [component purpose]
  - **implementation approach**: [implementation details]
  - **key classes/modules**: [list with descriptions]
  - **dependencies**: [internal and external dependencies]
  - **special considerations**: [important notes]

### key files and components affected (from tasks.md)
[summary or direct copy of file/component checklists from the original tasks.md for this project. this provides a quick reference to the scope of changes at a component/file level.]

### algorithms and complex logic
[documentation of key algorithms and complex business logic]

### third-party integrations
[details of all third-party integrations including apis and libraries]

### configuration parameters
[complete listing of all configuration parameters and their purpose]

### build and packaging details
[documentation of build process, packaging, and artifacts]
```

### 4. api documentation

```markdown
## api documentation

### api overview
[high-level overview of all apis (internal and external)]

### api endpoints
- **endpoint 1**:
  - **url/path**: [endpoint url or path]
  - **method**: [http method]
  - **purpose**: [purpose of the endpoint]
  - **request format**: [request format with examples]
  - **response format**: [response format with examples]
  - **error codes**: [possible error codes and meanings]
  - **security**: [security considerations]
  - **rate limits**: [any rate limits]
  - **notes**: [additional notes]

- **endpoint 2**:
  - **url/path**: [endpoint url or path]
  - **method**: [http method]
  - **purpose**: [purpose of the endpoint]
  - **request format**: [request format with examples]
  - **response format**: [response format with examples]
  - **error codes**: [possible error codes and meanings]
  - **security**: [security considerations]
  - **rate limits**: [any rate limits]
  - **notes**: [additional notes]

### api authentication
[authentication methods and implementation details]

### api versioning strategy
[versioning approach and migration strategy]

### sdk or client libraries
[available sdks or client libraries with usage examples]
```

### 5. data model and schema documentation

```markdown
## data model and schema documentation

### data model overview
[high-level overview of the data model with entity relationship diagrams]

### database schema
[detailed database schema with tables, columns, and relationships]

### data dictionary
[comprehensive data dictionary with all entities and attributes]

### data validation rules
[data validation rules and enforcement mechanisms]

### data migration procedures
[procedures for data migration and version management]

### data archiving strategy
[strategy for data archiving and retention]
```

### 6. security documentation

```markdown
## security documentation

### security architecture
[overview of security architecture and design principles]

### authentication and authorization
[detailed implementation of authentication and authorization]

### data protection measures
[measures implemented to protect sensitive data]

### security controls
[technical and procedural security controls]

### vulnerability management
[approach to vulnerability management and patching]

### security testing results
[summary of security testing and assessments]

### compliance considerations
[regulatory and compliance considerations addressed]
```

### 7. testing documentation

```markdown
## testing documentation

### test strategy
[overall testing strategy and approach]

### test cases
[catalog of test cases with expected results]

### automated tests
[documentation of automated tests and frameworks]

### performance test results
[results of performance testing with benchmarks]

### security test results
[results of security testing with findings]

### user acceptance testing
[uat approach, scenarios, and results]

### known issues and limitations
[documentation of known issues and system limitations]
```

### 8. deployment documentation

```markdown
## deployment documentation

### deployment architecture
[detailed deployment architecture with diagrams]

### environment configuration
[configuration details for all environments]

### deployment procedures
[step-by-step deployment procedures]

### configuration management
[configuration management approach and tools]

### release management
[release management process and procedures]

### rollback procedures
[procedures for rolling back deployments]

### monitoring and alerting
[monitoring setup, metrics, and alerting configuration]
```

### 9. operational documentation

```markdown
## operational documentation

### operating procedures
[day-to-day operational procedures]

### maintenance tasks
[routine maintenance tasks and schedules]

### troubleshooting guide
[guide for troubleshooting common issues]

### backup and recovery
[backup and recovery procedures]

### disaster recovery
[disaster recovery plan and procedures]

### performance tuning
[performance tuning guidelines and procedures]

### slas and metrics
[service level agreements and key performance metrics]
```

### 10. knowledge transfer documentation

```markdown
## knowledge transfer documentation

### system overview for new team members
[concise system overview for onboarding]

### key concepts and terminology
[glossary of key concepts and terminology]

### common tasks and procedures
[guide to common tasks and procedures]

### frequently asked questions
[faqs for system users and maintainers]

### training materials
[training materials for different roles]

### support escalation process
[process for escalating support issues]

### further reading and resources
[additional resources and documentation]
```

### 11. project history and learnings

```markdown
## project history and learnings

### project timeline
[summary of the project timeline and key milestones]

### key decisions and rationale
[record of key decisions and their rationale]

### challenges and solutions
[documentation of challenges faced and how they were addressed]

### lessons learned
[key lessons learned that might benefit future projects]

### performance against objectives
[assessment of performance against original objectives]

### future enhancements
[potential future enhancements and extensions]
```

## üìã archiving process

### 1. preparation

```mermaid
flowchart td
    classdef step fill:#f9d77e,stroke:#d9b95c,color:#000
    classdef artifact fill:#f4b8c4,stroke:#d498a4,color:#000
    
    start([begin archive<br>preparation]) --> template[load archive<br>template]
    template --> review[review project<br>documentation]
    review --> identify[identify all<br>artifacts]
    identify --> gather[gather all<br>materials]
    gather --> organize[organize<br>materials]
    organize --> plan[create archiving<br>plan]
    plan --> resources[allocate<br>resources]
    resources --> complete([preparation<br>complete])
    
    template -.-> at((archive<br>template))
    review -.-> projdocs((project<br>documentation))
    identify -.-> artlist((artifact<br>list))
    plan -.-> archplan((archiving<br>plan))
    
    class start,complete milestone
    class template,review,identify,gather,organize,plan,resources step
    class at,projdocs,artlist,archplan artifact
```

**key preparation steps:**
1. load the comprehensive archive template
2. review all project documentation including reflection document
3. identify all artifacts to be archived
4. gather all materials from various sources
5. organize materials according to the archive structure
6. create a detailed archiving plan
7. allocate resources for the archiving process

### 2. documentation creation

```mermaid
flowchart td
    classdef step fill:#f9d77e,stroke:#d9b95c,color:#000
    classdef artifact fill:#f4b8c4,stroke:#d498a4,color:#000
    
    start([begin documentation<br>creation]) --> system[create system<br>documentation]
    system --> req[create requirements<br>and design documentation]
    req --> impl[create implementation<br>documentation]
    impl --> api[create api<br>documentation]
    api --> data[create data model<br>documentation]
    data --> security[create security<br>documentation]
    security --> test[create testing<br>documentation]
    test --> deploy[create deployment<br>documentation]
    deploy --> ops[create operational<br>documentation]
    ops --> knowledge[create knowledge transfer<br>documentation]
    knowledge --> history[create project history<br>documentation]
    history --> review[review all<br>documentation]
    review --> complete([documentation<br>creation complete])
    
    system -.-> sysdoc((system<br>documentation))
    req -.-> reqdoc((requirements<br>documentation))
    impl -.-> impldoc((implementation<br>documentation))
    api -.-> apidoc((api<br>documentation))
    data -.-> datadoc((data model<br>documentation))
    security -.-> secdoc((security<br>documentation))
    test -.-> testdoc((testing<br>documentation))
    deploy -.-> deploydoc((deployment<br>documentation))
    ops -.-> opsdoc((operational<br>documentation))
    knowledge -.-> knowdoc((knowledge transfer<br>documentation))
    history -.-> histdoc((project history<br>documentation))
    
    class start,complete milestone
    class system,req,impl,api,data,security,test,deploy,ops,knowledge,history,review step
    class sysdoc,reqdoc,impldoc,apidoc,datadoc,secdoc,testdoc,deploydoc,opsdoc,knowdoc,histdoc artifact
```

**key documentation steps:**
1. create comprehensive system documentation
2. document requirements and design decisions
3. document implementation details for all components
4. create complete api documentation
5. document data models and schemas
6. document security measures and controls
7. create thorough testing documentation
8. document deployment procedures
9. create operational documentation
10. prepare knowledge transfer documentation
11. document project history and learnings
12. review all documentation for completeness and accuracy

### 3. archiving and integration

```mermaid
flowchart td
    classdef step fill:#f9d77e,stroke:#d9b95c,color:#000
    classdef artifact fill:#f4b8c4,stroke:#d498a4,color:#000
    classdef verification fill:#c5e8b7,stroke:#a5c897,color:#000
    
    start([begin archiving<br>and integration]) --> consolidate[consolidate all<br>documentation]
    consolidate --> crossref[create cross-reference<br>index]
    crossref --> version[version all<br>documentation]
    version --> archive[archive in<br>repository]
    archive --> updatemb[update memory<br>bank]
    updatemb --> accesscontrol[establish access<br>controls]
    accesscontrol --> announce[announce<br>availability]
    announce --> verification{archiving<br>verification}
    verification -->|pass| complete([archiving<br>complete])
    verification -->|fail| revise[revise<br>archiving]
    revise --> verification
    
    consolidate -.-> alldocs((consolidated<br>documentation))
    crossref -.-> index((cross-reference<br>index))
    archive -.-> repo((archive<br>repository))
    updatemb -.-> mb((updated memory<br>bank))
    
    class start,complete milestone
    class consolidate,crossref,version,archive,updatemb,accesscontrol,announce,revise step
    class verification verification
    class alldocs,index,repo,mb artifact
```

**key archiving steps:**
1. consolidate all documentation into a cohesive package
2. create a cross-reference index linking all documentation
3. version all documentation appropriately
4. archive in the designated repository
5. update memory bank with relevant information
6. establish appropriate access controls
7. announce availability to relevant stakeholders
8. verify archiving completeness and accessibility

## üìã memory bank integration

```mermaid
flowchart td
    classdef memfile fill:#f4b8c4,stroke:#d498a4,color:#000
    classdef process fill:#f9d77e,stroke:#d9b95c,color:#000
    
    archiving[comprehensive<br>archiving] --> pb[projectbrief.md]
    archiving --> pc[productcontext.md]
    archiving --> ac[activecontext.md]
    archiving --> sp[systempatterns.md]
    archiving --> tc[techcontext.md]
    archiving --> p[progress.md]
    
    pb & pc & ac & sp & tc & p --> mbi[memory bank<br>integration]
    mbi --> next[repository of<br>knowledge]
    
    class pb,pc,ac,sp,tc,p memfile
    class archiving,mbi,next process
```

### memory bank updates

specific updates to make to memory bank files:

1. **projectbrief.md**
   - update with final system description
   - document completion status
   - include links to archived documentation

2. **productcontext.md**
   - update with final business context
   - document business value delivered
   - include links to requirements documentation

3. **activecontext.md**
   - update with system status (completed)
   - document handover information
   - include links to operational documentation

4. **systempatterns.md**
   - update with final architecture patterns
   - document successful implementation patterns
   - include links to architecture documentation

5. **techcontext.md**
   - update with final technology stack
   - document integration points
   - include links to technical documentation

6. **progress.md**
   - update with final project status
   - document completion metrics
   - include links to project history documentation

## üìã archiving verification checklist

```
‚úì archiving verification checklist

system documentation
- system overview complete? [yes/no]
- architecture documented with diagrams? [yes/no]
- key components documented? [yes/no]
- integration points documented? [yes/no]

requirements and design
- business requirements documented? [yes/no]
- functional requirements documented? [yes/no]
- architecture decisions documented? [yes/no]
- design patterns documented? [yes/no]

implementation
- component implementation details documented? [yes/no]
- key algorithms documented? [yes/no]
- third-party integrations documented? [yes/no]
- configuration parameters documented? [yes/no]

api documentation
- api endpoints documented? [yes/no]
- request/response formats documented? [yes/no]
- authentication documented? [yes/no]
- error handling documented? [yes/no]

data documentation
- data model documented? [yes/no]
- database schema documented? [yes/no]
- data dictionary provided? [yes/no]
- data validation rules documented? [yes/no]

security documentation
- security architecture documented? [yes/no]
- authentication/authorization documented? [yes/no]
- data protection measures documented? [yes/no]
- security testing results documented? [yes/no]

testing documentation
- test strategy documented? [yes/no]
- test cases documented? [yes/no]
- test results documented? [yes/no]
- known issues documented? [yes/no]

deployment documentation
- deployment architecture documented? [yes/no]
- environment configurations documented? [yes/no]
- deployment procedures documented? [yes/no]
- rollback procedures documented? [yes/no]

operational documentation
- operating procedures documented? [yes/no]
- troubleshooting guide provided? [yes/no]
- backup and recovery documented? [yes/no]
- monitoring configuration documented? [yes/no]

knowledge transfer
- onboarding overview provided? [yes/no]
- key concepts documented? [yes/no]
- common tasks documented? [yes/no]
- faqs provided? [yes/no]

project history
- project timeline documented? [yes/no]
- key decisions documented? [yes/no]
- lessons learned documented? [yes/no]
- future enhancements suggested? [yes/no]

memory bank integration
- all memory bank files updated? [yes/no]
- cross-references created? [yes/no]
- documentation properly versioned? [yes/no]
- archive repository established? [yes/no]
```

## üìã minimal mode archiving format

for situations requiring a more compact archiving approach:

```markdown
## level 4 task archive: [system name]

### system summary
- **purpose**: [brief description of system purpose]
- **key components**: [list of key components]
- **architecture**: [brief architecture description with diagram]

### implementation summary
- **technology stack**: [key technologies used]
- **key modules**: [brief description of important modules]
- **integration points**: [list of major integration points]

### critical documentation
- **api documentation**: [link or brief summary]
- **data model**: [link or brief description]
- **deployment configuration**: [link or brief description]
- **security measures**: [link or brief summary]

### operational information
- **deployment procedure**: [link or brief description]
- **key configuration parameters**: [list of important parameters]
- **monitoring setup**: [brief monitoring details]
- **common issues**: [list of common issues with solutions]

### repository information
- **code repository**: [link to repository]
- **documentation repository**: [link to documentation]
- **build artifacts**: [link to build artifacts]

### knowledge transfer summary
- **key contacts**: [list of key people with knowledge]
- **critical knowledge areas**: [areas requiring special expertise]
- **training resources**: [links to training materials]

### memory bank links
- [links to updated memory bank files]
```

## üö® archiving enforcement principle

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ comprehensive archiving is mandatory for level 4     ‚îÇ
‚îÇ tasks. no complex system is considered complete      ‚îÇ
‚îÇ until comprehensive archiving is finished and        ‚îÇ
‚îÇ verified.                                            ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```