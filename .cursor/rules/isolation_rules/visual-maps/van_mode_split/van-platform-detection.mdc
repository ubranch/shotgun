---
description: van platform detection
globs: van-platform-detection.mdc
alwaysapply: false
---
# van platform detection

> **tldr:** this document outlines the platform detection process during the van (verify, analyze, narrate) mode, ensuring that the system adapts to the user's operating system and environment.

## üíª platform detection workflow

```mermaid
graph td
    start["start<br>platform detection"] --> detectos["1Ô∏è‚É£ detect<br>operating system"]
    detectos -->|windows| setwin["set for<br>windows"]
    detectos -->|macos| setmac["set for<br>macos"]
    detectos -->|linux| setlinux["set for<br>linux"]
    
    setwin --> detectshell["2Ô∏è‚É£ detect<br>shell environment"]
    setmac --> detectshell
    setlinux --> detectshell
    
    detectshell -->|powershell| setps["set for<br>powershell"]
    detectshell -->|bash| setbash["set for<br>bash"]
    detectshell -->|zsh| setzsh["set for<br>zsh"]
    
    setps --> complete["‚úÖ detection<br>complete"]
    setbash --> complete
    setzsh --> complete
    
    style start fill:#4da6ff,stroke:#0066cc,color:white
    style detectos fill:#ffa64d,stroke:#cc7a30,color:white
    style setwin fill:#4dbb5f,stroke:#36873f,color:white
    style setmac fill:#4dbb5f,stroke:#36873f,color:white
    style setlinux fill:#4dbb5f,stroke:#36873f,color:white
    style detectshell fill:#d94dbb,stroke:#a3378a,color:white
    style setps fill:#4dbbbb,stroke:#368787,color:white
    style setbash fill:#4dbbbb,stroke:#368787,color:white
    style setzsh fill:#4dbbbb,stroke:#368787,color:white
    style complete fill:#4caf50,stroke:#388e3c,color:white
```

## üìã platform information

the following information is gathered during platform detection:

| category | information | example |
|--------------|-----------------|---------|
| **os** | operating system | windows, macos, linux |
| **shell** | shell environment | powershell, bash, zsh |
| **path sep** | path separator | `\`, `/` |
| **line ending**| line ending char | `\r\n`, `\n` |

## üîÑ command adaptation

based on the detected platform, commands are adapted for compatibility.

```mermaid
graph td
    subgraph "command adaptation"
        generic["generic command"] --> adapt{"platform?"}
        adapt -->|windows| win["windows-specific<br>command"]
        adapt -->|unix-like| unix["unix-like<br>command"]
    end
    
    style generic fill:#d971ff,stroke:#a33bc2,color:white
    style adapt fill:#ffa64d,stroke:#cc7a30,color:white
    style win fill:#4dbb5f,stroke:#36873f,color:white
    style unix fill:#4dbb5f,stroke:#36873f,color:white
```

## ‚úÖ detection complete

once platform detection is complete, the system is configured to use the appropriate commands and file formats for the user's environment.

```
platform detection complete.
system configured for: [os], [shell]
```